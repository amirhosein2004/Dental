{% extends "base.html" %}
{% load static %}
{% load compress %}

{% block extra_static %}
{% compress css %}
    <link rel="stylesheet" href="{% static 'accounts/css/password_reset_confirm.css' %}">
{% endcompress %}
{% endblock %}

{% block content %}
    <div class="password-reset-wrapper">
        <div class="password-reset-box">
            <h2 class="reset-title">تنظیم مجدد رمز عبور</h2>

            {% if validlink %}
                <p class="reset-instruction">لطفاً رمز عبور جدید خود را وارد کنید:</p>

                <form method="post" class="reset-form" novalidate>
                    {% csrf_token %}
                    
                    <div class="form-group">
                        {{ form.new_password1.label_tag }}
                        {{ form.new_password1 }}
                        {% if form.new_password1.errors %}
                            <small class="error-message">{{ form.new_password1.errors.0 }}</small>
                        {% endif %}
                    </div>

                    <div class="form-group">
                        {{ form.new_password2.label_tag }}
                        {{ form.new_password2 }}
                        {% if form.new_password2.errors %}
                            <small class="error-message">{{ form.new_password2.errors.0 }}</small>
                        {% endif %}
                    </div>

                    <div class="form-group captcha-group">
                        {{ form.captcha }}
                        {% if form.captcha.errors %}
                            <small class="error-message">{{ form.captcha.errors.0 }}</small>
                        {% endif %}
                    </div>

                    <button type="submit" class="submit-btn">ذخیره رمز عبور جدید</button>
                </form>
            {% else %}
                <p class="error-text">لینک معتبر نیست یا منقضی شده است. لطفاً مجدداً درخواست بازیابی رمز عبور دهید。</p>
            {% endif %}

            <a href="{% url 'accounts:doctor_login' %}" class="login-link">بازگشت به صفحه ورود</a>
        </div>
    </div>
{% endblock %}