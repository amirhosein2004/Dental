{% extends 'base.html' %}
{% load static %}

{% block title %} دسته‌بندی ها {% endblock %}

{% block extra_static %}
<link rel="stylesheet" href="{% static 'core/css/category.css' %}">
{% endblock %}

{% block content %}
<div class="category-container">
    <h1 class="title">مدیریت دسته‌بندی‌ها</h1>

    <!-- نمایش دسته‌بندی‌ها -->
    <div class="category-list">
        <h2>لیست دسته‌بندی‌ها</h2>
        {% if categories %}
            <ul id="category-list">
                {% for category in categories %}
                    <li class="category-item" data-id="{{ category.id }}">
                        <span class="category-name">{{ category.name }}</span>
                        <form method="post" action="{% url 'core:remove_category' category.id %}" class="delete-form">
                            {% csrf_token %}
                            <button type="submit" class="delete-btn">✖</button>
                        </form>
                        <button class="edit-btn">✏️</button>
                        <form method="post" action="{% url 'core:update_category' category.id %}" class="edit-form" style="display: none;">
                            {% csrf_token %}
                            <input type="text" name="name" value="{{ category.name }}" class="edit-input">
                        </form>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="empty-message">هیچ دسته‌بندی‌ای یافت نشد.</p>
        {% endif %}
    </div>

    <!-- فرم اضافه کردن دسته‌بندی -->
    <div class="category-form">
        <h2>افزودن دسته‌بندی جدید</h2>
        <form id="category-form" method="post" action="{% url 'core:add_category' %}" class="add-form" novalidate>
            {% csrf_token %}
            {{ form.as_p }}
            <button class="btn btn-primary" type="submit">افزودن</button>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'core/js/category.js' %}"></script>
{% endblock %}